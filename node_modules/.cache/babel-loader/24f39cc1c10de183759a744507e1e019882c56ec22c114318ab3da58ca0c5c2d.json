{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ebr/code/webgalery/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ebr/code/webgalery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ebr/code/webgalery/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Image from'../components/Image';import{db}from'../config/firebase';import'../css/App.css';import{getDocs,collection}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Slideshow(){var defaultimage={_location:{path:\"fab/1\"}};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),imageList=_useState2[0],setImageList=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentimage=_useState4[0],setCurrentImage=_useState4[1];function fetchdata(){return _fetchdata.apply(this,arguments);}function _fetchdata(){_fetchdata=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newImages,querySnapshot;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:newImages=[];_context.next=3;return getDocs(collection(db,\"fab\"));case 3:querySnapshot=_context.sent;querySnapshot.forEach(function(doc){newImages.push(doc.data());});setImageList(newImages);case 6:case\"end\":return _context.stop();}},_callee);}));return _fetchdata.apply(this,arguments);}useEffect(function(){if(imageList.length===0){fetchdata();}if(currentimage===imageList.length-1){fetchdata();}},[currentimage]);useEffect(function(){var interval=setInterval(function(){if(currentimage===imageList.length-1){fetchdata(setImageList);}setCurrentImage(function(currentimage){return currentimage===imageList.length-1?0:currentimage+1;});},5000);return function(){return clearInterval(interval);};},[imageList]);return/*#__PURE__*/_jsx(\"div\",{className:\"image-list\",children:imageList.map(function(element,index){return/*#__PURE__*/_jsxs(\"div\",{className:['imageContainer',index===currentimage?'active':'disable'].join(' '),children:[/*#__PURE__*/_jsx(\"img\",{src:element.url},index),/*#__PURE__*/_jsx(\"h2\",{className:\"description\",children:element.description})]},index);})});}export default Slideshow;","map":{"version":3,"names":["React","useEffect","useState","Image","db","getDocs","collection","jsx","_jsx","jsxs","_jsxs","Slideshow","defaultimage","_location","path","_useState","_useState2","_slicedToArray","imageList","setImageList","_useState3","_useState4","currentimage","setCurrentImage","fetchdata","_fetchdata","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newImages","querySnapshot","wrap","_callee$","_context","prev","next","sent","forEach","doc","push","data","stop","length","interval","setInterval","clearInterval","className","children","map","element","index","join","src","url","description"],"sources":["/Users/ebr/code/webgalery/src/pages/Slideshow.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Image from '../components/Image';\nimport { db } from '../config/firebase';\nimport '../css/App.css';\nimport { getDocs, collection } from \"firebase/firestore\";\n\n\n\nfunction Slideshow() {\n  const defaultimage = { _location: { path: \"fab/1\" } }\n  const [imageList, setImageList] = useState([]);\n  const [currentimage, setCurrentImage] = useState(0);\n\n  async function fetchdata() {\n      const newImages = [];\n      const querySnapshot = await getDocs(collection(db, \"fab\"));\n      querySnapshot.forEach((doc) => {\n        newImages.push(doc.data());\n      });\n      setImageList(newImages);\n  }\n\n  useEffect(() =>{\n    if (imageList.length === 0) {\n      fetchdata();\n    }\n    if (currentimage === imageList.length - 1){\n    fetchdata();\n    }\n  }, [currentimage])\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (currentimage === imageList.length - 1){\n        fetchdata(setImageList);\n      }\n      setCurrentImage((currentimage) => (currentimage === imageList.length - 1 ? 0 : currentimage + 1));\n    }, 5000);\n    return () => clearInterval(interval);\n  }, [imageList])\n\n  return (\n    <div className=\"image-list\">\n      {\n        imageList.map((element, index) => (\n          <div className={['imageContainer', index === currentimage ? 'active' : 'disable'].join(' ')} key={index} >\n          <img key={index} src={element.url} />\n          <h2 className='description'>{element.description}</h2>\n          </div>\n        ))\n      }\n    </div>\n  );\n}\nexport default Slideshow;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}